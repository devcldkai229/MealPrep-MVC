@model MealPrep.BLL.DTOs.UserFeedbackSummaryDto

@{
    ViewData["Title"] = "My Feedback Summary";
}

<div class="container py-4">
    <div class="row mb-4">
        <div class="col-md-6">
            <h2 class="fw-bold">üìä Th·ªëng k√™ ƒë√°nh gi√° c·ªßa t√¥i</h2>
        </div>
        <div class="col-md-6 text-end">
            <a asp-action="Index" class="btn btn-primary">‚≠ê ƒê√°nh gi√° m√≥n m·ªõi</a>
        </div>
    </div>

    <!-- Summary Cards -->
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="card bg-primary text-white h-100">
                <div class="card-body text-center">
                    <h6>Total Ratings</h6>
                    <h2>@Model.TotalRatings</h2>
                    <small>ƒê√°nh gi√°</small>
                </div>
            </div>
        </div>
        
        <div class="col-md-3">
            <div class="card bg-success text-white h-100">
                <div class="card-body text-center">
                    <h6>Average Rating</h6>
                    <h2>@Model.AverageStars.ToString("N1") ‚≠ê</h2>
                    <small>Trung b√¨nh</small>
                </div>
            </div>
        </div>
        
        <div class="col-md-3">
            <div class="card bg-info text-white h-100">
                <div class="card-body text-center">
                    <h6>Meals Consumed</h6>
                    <h2>@Model.TotalMealsConsumed</h2>
                    <small>M√≥n ƒë√£ ƒÉn</small>
                </div>
            </div>
        </div>
        
        <div class="col-md-3">
            <div class="card bg-warning text-white h-100">
                <div class="card-body text-center">
                    <h6>Disliked Meals</h6>
                    <h2>@Model.DislikedMealsCount</h2>
                    <small>M√≥n ƒë√£ ch·∫∑n</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Favorite Tags -->
    @if (Model.FavoriteTags.Any())
    {
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">‚ù§Ô∏è Tags y√™u th√≠ch c·ªßa b·∫°n</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-2">
                    @foreach (var tag in Model.FavoriteTags)
                    {
                        <span class="badge bg-primary fs-6 px-3 py-2">@tag</span>
                    }
                </div>
            </div>
        </div>
    }

    <!-- Insights -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">üí° Insights</h5>
        </div>
        <div class="card-body">
            @if (Model.AverageStars >= 4)
            {
                <div class="alert alert-success">
                    <strong>üéâ Tuy·ªát v·ªùi!</strong> B·∫°n c√≥ tr·∫£i nghi·ªám r·∫•t t√≠ch c·ª±c v·ªõi c√°c m√≥n ƒÉn c·ªßa ch√∫ng t√¥i!
                    Rating trung b√¨nh c·ªßa b·∫°n l√† @Model.AverageStars.ToString("N1") sao.
                </div>
            }
            else if (Model.AverageStars >= 3)
            {
                <div class="alert alert-info">
                    <strong>üëç T·ªët!</strong> B·∫°n c√≥ tr·∫£i nghi·ªám kh√° t·ªët v·ªõi rating trung b√¨nh @Model.AverageStars.ToString("N1") sao.
                    Ch√∫ng t√¥i s·∫Ω c·ªë g·∫Øng c·∫£i thi·ªán h∆°n n·ªØa!
                </div>
            }
            else if (Model.TotalRatings > 0)
            {
                <div class="alert alert-warning">
                    <strong>üòî Xin l·ªói!</strong> Rating trung b√¨nh c·ªßa b·∫°n l√† @Model.AverageStars.ToString("N1") sao.
                    Ch√∫ng t√¥i r·∫•t mu·ªën c·∫£i thi·ªán tr·∫£i nghi·ªám c·ªßa b·∫°n. H√£y chia s·∫ª th√™m feedback!
                </div>
            }

            @if (Model.DislikedMealsCount > 0)
            {
                <div class="alert alert-info mt-3">
                    <strong>üö´ M√≥n ƒë√£ ch·∫∑n:</strong> B·∫°n ƒë√£ ch·∫∑n @Model.DislikedMealsCount m√≥n.
                    Ch√∫ng t√¥i s·∫Ω kh√¥ng g·ª£i √Ω nh·ªØng m√≥n n√†y cho b·∫°n n·ªØa.
                </div>
            }

            @if (Model.TotalRatings == 0)
            {
                <div class="alert alert-secondary">
                    <strong>üëã Ch√†o m·ª´ng!</strong> B·∫°n ch∆∞a c√≥ ƒë√°nh gi√° n√†o.
                    H√£y b·∫Øt ƒë·∫ßu ƒë√°nh gi√° m√≥n ƒÉn ƒë·ªÉ gi√∫p ch√∫ng t√¥i c·∫£i thi·ªán d·ªãch v·ª•!
                </div>
            }
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="mt-4 text-center">
        <a asp-action="Index" class="btn btn-primary btn-lg me-2">
            ‚≠ê ƒê√°nh gi√° m√≥n m·ªõi
        </a>
        <a asp-controller="Dashboard" asp-action="Index" class="btn btn-outline-secondary btn-lg">
            ‚Üê V·ªÅ Dashboard
        </a>
    </div>
</div>
